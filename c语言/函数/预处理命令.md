# 宏定义
## 不带参宏定义
- 宏名代替字符串，可减少工作量，==一改全改==
- 宏名代替字符串[^1]，并不作正确性检查，预编译==不作语法检查==
[^1]:此处字符串指一串字符符号，没有数据类型；并非字符数组的字符串

![image.png|300](https://tuchuang-1387570672.cos.ap-nanjing.myqcloud.com/obsidianvault20251128162829.png)
undef eg.
![image.png|500](https://tuchuang-1387570672.cos.ap-nanjing.myqcloud.com/obsidianvault20251128170940.png)
层层置换引用宏名eg.
```c
#include<stdio.h>
#define R 3.0
#define PI 3.14
#define L 2*PI*R
#define S PI*R*R
```

# 带参数的宏定义
```c
#define PI 3.14 
#define S(r) PI*r*r

S(a)-->3,14*a*a
S(a+b)-->3.14*a+b*a+b
S((a+b))-->3.14*(a+b)*(a+b)
若想使2和3结果相等应改为
S(a) 3,14*(r)*(r)
```
## ==现带入后计算==
```c
#include<stdio.h>
#define MIN(x, y) (x)<(y)?(x):(j);
int main(void){
	int i = 10, j=15,k;
	
	k=10*MIN(i, j);
	
	k=10*(i)<(j)?(i):(j)//先带入
	
	printf("k=%d\n",k);
	return 0;
	}
```
![image.png|500](https://tuchuang-1387570672.cos.ap-nanjing.myqcloud.com/obsidianvault20251201140130.png)
`S(a+b)` 会展开成 `PT*a+b*a+b`，而不是 `PT*(a+b)*(a+b)`。

展开过程：

text

S(a+b)
→ PT * a+b * a+b
→ 5.5 * 1 + 2 * 1 + 2
→ 5.5 + 2 + 2
→ 9.5

所以输出是 `9.5`。


---


| 函数调用      | 宏定义     |
| --------- | ------- |
| 先求实参在代入形参 | 简单字符替换  |
| 参数定义类型    | 不存在类型单元 |
| 分配内存单元    | 不分配内存单元 |
| 只能得到一个返回值 | 可得到多个结果 |
| 长度不变      | 源程序长度加长 |
| 占用运行时间    | 占用编译时间  |

---
# 文件包含

![image.png|500](https://tuchuang-1387570672.cos.ap-nanjing.myqcloud.com/obsidianvault20251128233844.png)

---
![image.png](https://tuchuang-1387570672.cos.ap-nanjing.myqcloud.com/obsidianvault20251128234050.png)

